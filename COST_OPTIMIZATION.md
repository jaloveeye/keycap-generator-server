# 비용 최적화 가이드

## 현재 비용

### DALL-E 3 가격
- **1024x1024**: $0.040 / 이미지 ✅ (현재 사용)
- **1792x1024**: $0.080 / 이미지 (이전)

### 비용 절감 조치

1. ✅ **이미지 크기 축소**: 1792x1024 → 1024x1024 (50% 절감)
2. ✅ **이미지 캐싱**: 동일한 색상 조합이면 재사용 (추가 비용 0)
3. ✅ **Rate Limiting**: 일일 제한으로 사용량 제어

## 예상 비용

### 시나리오별

**일일 제한 1회 (현재 설정)**
- 하루: $0.040
- 한 달: $1.20
- 1년: $14.60

**일일 제한 3회**
- 하루: $0.12
- 한 달: $3.60
- 1년: $43.80

**캐싱 효과 (50% 재사용 가정)**
- 일일 제한 1회: $0.02/일 → $0.60/월
- 일일 제한 3회: $0.06/일 → $1.80/월

## 추가 최적화 방안

### 1. 개발 환경 최적화

개발/테스트 시 실제 이미지 생성 대신 더미 이미지 사용:

```typescript
// .env.local
NODE_ENV=development
USE_MOCK_IMAGE=true
```

### 2. 캐시 전략 강화

- 동일 색상 조합 재사용
- 유사 색상 조합 매칭 (선택적)
- 캐시 만료 시간 설정 (선택적)

### 3. Rate Limit 조정

- 개발 환경: 더 높은 제한
- 프로덕션: 엄격한 제한 (현재 1회)

### 4. 모니터링

비용 추적을 위한 로깅:

```typescript
// 이미지 생성 시마다 로그
console.log(`💰 DALL-E API 호출: $0.040`);
```

## 비용 모니터링

OpenAI 대시보드에서 사용량 확인:
- https://platform.openai.com/usage

## 권장 사항

1. **프로덕션**: 일일 1회 제한 유지
2. **캐싱**: 활성화 (기본값)
3. **이미지 크기**: 1024x1024 유지
4. **모니터링**: 주간 비용 확인

## 비용 알림 설정

OpenAI에서 사용량 알림 설정:
- Settings → Billing → Usage limits
- 월별 예산 설정 가능

